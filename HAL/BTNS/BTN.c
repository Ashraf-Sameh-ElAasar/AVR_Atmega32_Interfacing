/****************************************************************/
/*   Author             :    Ashraf Sameh ElAasar				*/
/*	 Date 				:    28 Feb 2023 						*/
/*	 Version 			:    1.0V 							 	*/
/*	 Description 		:   Buttons Prog.c						*/
/****************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "BTN.h"
#include "DIO.h"
#include "BTN_CFG.h"

/**********************************************************************************************************************
*  LOCAL MACROS CONSTANT\FUNCTION
*********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA 
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/

/******************************************************************************
* \Syntax          : void button_init (void)
* \Description     : initiate buttons
*
* \Sync\Async      : Synchronous
* \Reentrancy      : Non Reentrant
* \Parameters (in) : void
* \Return value:   : void
*******************************************************************************/

void button_init (void)
{
	volatile u8 i;
	for(i = 0 ;i < NUMBER_OF_Buttons; i++)
	{
		
		dio_voidConfigChannel(Buttons[i].Port , Buttons[i].Pin, INPUT);
		
	}
	
}

/******************************************************************************
* \Syntax          : button_id_t button_get_status(BUTTON_ID button_id)
* \Description     : Get button status
*
* \Sync\Async      : Synchronous
* \Reentrancy      : Non Reentrant
* \Parameters (in) : button_id   button number
* \Return value:   : button_id_t  Pressed
*                                 Released
*******************************************************************************/


button_id_t button_get_status(BUTTON_ID button_id)
{

	for(volatile u8 i = 0 ; i < NUMBER_OF_Buttons ; i ++ )
	{
		

		if(button_id == Buttons[i].Num )
		{
			
			switch(Buttons[i].state)
			{
				case PULL_DOWN :
				if(dio_dioLevelReadChannel(Buttons[i].Port,Buttons[i].Pin) == 1)
				{
					
					return PRESSED ;
				}
				else
				{
					
					return RELEASED ;
					
				}
				break ;
				
				case PULL_UP :
				
				if(dio_dioLevelReadChannel(Buttons[i].Port,Buttons[i].Pin) == 0)
				{
					
					return PRESSED ;
				}
				else
				{
					
					return RELEASED ;
					
				}
				break ;
			}
		}
	}
	return RELEASED ;
}

/**********************************************************************************************************************
 *  END OF FILE: BTN.c
 *********************************************************************************************************************/
